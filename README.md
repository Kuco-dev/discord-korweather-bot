# 🌤️ Discord Korean Weather Bot v2.0

한국 전 지역의 실시간 날씨 정보와 예보를 제공하는 고급 디스코드 봇입니다.

## 🚀 새로운 기능 (v2.0)

### ✨ 주요 업데이트
- 🔄 **상세 예보 시스템**: 3일/10일 예보 제공
- 📊 **통계 시스템**: 개인/서버 사용 통계
- ⚡ **성능 최적화**: 데이터 캐싱 및 최적화
- 🗄️ **데이터베이스**: MariaDB 기반 데이터 관리
- 🌡️ **기상청 직접 API**: 정확한 실측 데이터

## 📋 명령어 목록

### 기본 날씨 명령어
- `/날씨 [시도] [시군구]` - 현재 날씨 정보 조회
- `/예보 [시도] [시군구]` - 3일간 상세 예보
- `/중기예보 [시도] [시군구]` - 10일간 중기 예보

### 통계 및 정보
- `/통계` - 개인 날씨 조회 통계
- `/서버통계` - 서버 전체 사용 통계 (관리자 전용)
- `/도움말` - 전체 기능 안내
- `/버전` - 봇 버전 정보

## 🎯 기능 상세

### 🌡️ 실시간 날씨 정보
- **기상청 직접 API** 연동으로 정확한 실측 데이터
- 온도, 습도, 바람, 기압, 강수량, 가시거리 제공
- 전국 **모든 시/군/구** 지원

### 📅 상세 예보 시스템
- **단기예보**: 3일간 3시간 간격 상세 예보
- **중기예보**: 10일간 일별 날씨 및 기온 예보
- 강수확률, 하늘상태, 기온 변화 정보

### 📊 통계 시스템
#### 개인 통계
- 총 조회 횟수
- 선호 지역 분석
- 최근 30일 사용량
- 평균 조회 지역 기온

#### 서버 통계 (관리자)
- 서버 전체 사용량
- 인기 지역 순위
- 활성 사용자 수

### ⚡ 성능 최적화
- **데이터 캐싱**: 10분간 API 결과 캐시
- **비동기 처리**: 빠른 응답 시간
- **오류 처리**: 안정적인 서비스 운영
- **자동 정리**: 만료된 캐시 자동 삭제

## 🛠️ 설치 및 설정

### 1. 저장소 클론
```bash
git clone https://github.com/your-username/discord-korweather-bot.git
cd discord-korweather-bot
```

### 2. 의존성 설치
```bash
npm install
```

### 3. 환경 변수 설정
`.env.example` 파일을 복사하여 `.env` 파일을 생성하고 설정을 입력하세요.

```bash
cp .env.example .env
```

### 4. MariaDB 데이터베이스 설정
```sql
CREATE DATABASE weather_bot CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'weather_bot'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON weather_bot.* TO 'weather_bot'@'localhost';
FLUSH PRIVILEGES;
```

### 5. 봇 실행
```bash
npm start
```

## 🌍 지원 지역

### 광역시/특별시/특별자치시
- 서울특별시 (25개 구)
- 부산광역시 (16개 구/군)
- 대구광역시 (8개 구/군)
- 인천광역시 (10개 구/군)
- 광주광역시 (5개 구)
- 대전광역시 (5개 구)
- 울산광역시 (5개 구/군)

### 도/특별자치도
- 경기도 (31개 시/군)
- 강원특별자치도 (18개 시/군)
- 충청북도 (11개 시/군)
- 충청남도 (15개 시/군)
- 전라북도 (14개 시/군)
- 전라남도 (22개 시/군)
- 경상북도 (23개 시/군)
- 경상남도 (18개 시/군)
- 제주특별자치도 (2개 시)

## 🎨 활용 예시

### 런닝/캠핑 적합도 분석
각 날씨 조회 시 **자동으로 활동 적합도**를 분석합니다:

#### 🏃‍♂️ 런닝 적합도
- 온도, 날씨, 바람, 습도를 종합 분석
- 4단계 등급 (매우 좋음/좋음/나쁨/매우 나쁨)
- 구체적인 이유와 조언 제공

#### 🏕️ 캠핑 적합도  
- 캠핑 특성에 맞춘 별도 분석
- 강수, 바람, 가시거리 중점 고려
- 안전 관련 상세 조언

## 📦 기술 스택

- **Discord.js v14** - Discord 봇 프레임워크
- **Node.js** - JavaScript 런타임
- **MariaDB/MySQL** - 관계형 데이터베이스
- **mysql2** - MySQL/MariaDB 드라이버
- **node-cron** - 스케줄링 시스템
- **Moment.js** - 시간 처리
- **Axios** - HTTP 클라이언트
- **기상청 API** - 실시간 기상 데이터

## 🔧 환경 변수

| 변수명 | 설명 | 필수 |
|--------|------|------|
| `DISCORD_TOKEN` | Discord 봇 토큰 | ✅ |
| `KMA_API_KEY` | 기상청 API 키 | ⚠️ |
| `DB_HOST` | 데이터베이스 호스트 | ✅ |
| `DB_USER` | 데이터베이스 사용자 | ✅ |
| `DB_PASSWORD` | 데이터베이스 비밀번호 | ✅ |
| `DB_NAME` | 데이터베이스 이름 | ✅ |
| `DB_PORT` | 데이터베이스 포트 | ✅ |

⚠️ `KMA_API_KEY`가 없으면 모의 데이터를 사용합니다.

## 🎯 명령어 예시

```
/날씨 서울특별시 강남구
/예보 경기도 수원시
/중기예보 부산광역시 해운대구
/통계
/도움말
```

## 🐛 문제 해결

### 자주 발생하는 문제

1. **API 키 관련**
   - 기상청 API 키가 없어도 모의 데이터로 동작
   - 실제 데이터가 필요한 경우 [기상청 API Hub](https://apihub.kma.go.kr/)에서 API 키 발급

2. **지역 오류**
   - 정확한 행정구역명 사용 필요
   - 오타 시 사용 가능한 지역 목록 자동 표시

3. **권한 오류**
   - 서버 통계는 관리자 권한 필요
   - 봇에 필요한 Discord 권한 확인

## 🔄 업데이트 로그

### v2.0.0 (2025-06-20)
- ✅ MariaDB 데이터베이스 지원
- ✅ 기상청 직접 API 연동
- ✅ 런닝/캠핑 적합도 분석
- ✅ 개인/서버 통계 시스템
- ✅ 캐싱 시스템으로 성능 최적화
- ✅ 전국 지역 지원 확대

## 📈 업데이트 계획

### v2.1 (예정)
- 🌊 해상 날씨 정보
- 🌸 계절별 특화 정보 (꽃가루, 자외선 등)
- 📱 모바일 친화적 인터페이스

### v2.2 (예정)  
- 🔗 웹 대시보드
- 📊 고급 통계 분석
- 🌍 국가별 확장

## 🤝 기여하기

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## 📞 지원

프로젝트에 관한 문의나 버그 리포트는 GitHub Issues를 이용해주세요.

## 📄 라이선스

MIT License - 자유롭게 사용, 수정, 배포 가능합니다.

---

**🌤️ 날씨 봇 v2.0으로 더욱 스마트한 날씨 정보를 경험하세요!**

⭐ 이 프로젝트가 도움이 되었다면 스타를 눌러주세요!